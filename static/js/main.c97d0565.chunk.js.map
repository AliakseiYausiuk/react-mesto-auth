{"version":3,"sources":["images/logo.svg","components/Header.js","images/Vector.svg","images/plus.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/Auth.js","images/UnionTrue.svg","images/UnionFalse.svg","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","email","handleSignOut","pathname","useLocation","text","linkRoute","className","src","logo","alt","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","cardLikeButtonClassName","likes","some","i","id","type","aria-label","handleDeleteClick","link","name","handleClick","handleLikeClick","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","avatar","vector","about","plus","map","el","Footer","ImagePopup","onClose","api","baseUrl","headers","this","_baseUrl","_headers","Promise","all","getInitialCards","getUserData","res","ok","json","reject","status","fetch","then","_getResponseData","data","method","body","JSON","stringify","bool","decrementLike","incrementLike","authorization","PopupWithForm","isOpen","onSubmit","textBtn","children","title","action","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","value","onChange","target","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","useRef","current","ref","AddPlacePopup","setLink","Register","registration","setEmail","password","setPassword","noValidate","Login","InfoTooltip","message","iconPath","ProtectedRoute","Component","component","props","BASE_URL","checkRequestResult","getContent","token","App","setCurrentUser","setCards","setLoggedIn","history","useHistory","getFullInfo","arrCards","userData","catch","err","console","log","jwt","localStorage","getItem","Auth","push","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","infoTooltipOpen","setInfoTooltipOpen","setMessage","escapeHtml","require","selectedCard","setSelectedCard","closeAllPopups","handleInfoTooltipContent","handlerInfoTooltipOpen","Provider","removeItem","userEdit","newCard","upgradeAvatar","exact","path","isLiked","changeLikeCardStatus","state","c","deleteCard","newCards","filter","regIsFine","setTimeout","regIsFailed","setItem","Error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c97d0565.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6129e9de.svg\";","import logo from '../images/logo.svg';\r\nimport { Link, useLocation } from 'react-router-dom';\r\n\r\n\r\nexport default function Header({loggedIn, email, handleSignOut}) {\r\n  const { pathname } = useLocation();\r\n  const text = `${pathname === '/sign-in' ? 'Регистрация' : 'Войти'}`;\r\n  const linkRoute = `${pathname === '/sign-in' ? '/sign-up' : '/sign-in'}`;\r\n    return (\r\n      <header className=\"header\">\r\n        <img className=\"logo\" src={logo} alt=\"Логотип\"/>\r\n        <div className=\"header__login\">\r\n        {loggedIn ? (\r\n          <>\r\n            <p className=\"header__email\">{email}</p>\r\n            <Link className=\"header__signout\" to=\"\" onClick={handleSignOut}>Выйти</Link>\r\n          </>) : (<Link to={linkRoute} className=\"header__link\">{text}</Link>)\r\n        }\r\n      </div>\r\n      </header>\r\n    )\r\n}","export default __webpack_public_path__ + \"static/media/Vector.f0dd9c51.svg\";","export default __webpack_public_path__ + \"static/media/plus.d5d6f8af.svg\";","import React from 'react'\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n// export const currentUserData = {};","import React, {useContext} from 'react'\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nconst Card = ({card, onCardClick, onCardLike, onCardDelete}) => {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    function handleClick(card) {\r\n        onCardClick(card);\r\n      }  \r\n\r\n    const handleLikeClick  = (card) => {\r\n        onCardLike(card);\r\n    }\r\n\r\n    const handleDeleteClick = (card) => {\r\n        onCardDelete(card);\r\n    }\r\n\r\n    // Определяем, являемся ли мы владельцем текущей карточки\r\n    const isOwn = card.owner._id === currentUser._id;\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n    const cardDeleteButtonClassName = isOwn ? 'cards__btn-delete' : ''; \r\n\r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName =  isLiked ? 'cards__like cards__like_active' : 'cards__like';\r\n    \r\n\r\n    return (\r\n        <li id={card._id} className=\"cards__card\">\r\n            {isOwn && <button className={cardDeleteButtonClassName} type=\"button\" aria-label=\"btn-delete\" onClick={() => handleDeleteClick(card)}></button>}\r\n            <figure className=\"cards__list\">\r\n            <img className=\"cards__foto\" src={card.link} alt={card.name} onClick={() => handleClick(card)}/>\r\n            <figcaption className=\"cards__text\">\r\n                {card.name}\r\n            </figcaption>\r\n            <ul className=\"cards__item\">\r\n                <li>\r\n                  <button className={cardLikeButtonClassName} type=\"button\" aria-label=\"btn-like\" onClick={() => handleLikeClick(card)}></button>\r\n                </li>\r\n                <li>\r\n                    <span className=\"cards__like-number\">{card.likes.length}</span>\r\n                </li>\r\n            </ul>\r\n            </figure>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Card\r\n","import React, {useContext} from 'react';\r\nimport vector from '../images/Vector.svg';\r\nimport plus from '../images/plus.svg';\r\nimport Card from './Card.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nconst Main = ({cards, onCardLike, onCardDelete, onEditAvatar, onEditProfile, onAddPlace, onCardClick}) => {\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n  \r\n    return (\r\n      <main className=\"main\">\r\n        <section className=\"profile\">\r\n        <div className=\"profile__avatar-hover\">\r\n        <img className=\"profile__avatar\" src={currentUser ? currentUser.avatar : ''} alt=\"Аватар\" onClick={onEditAvatar}/>\r\n        </div>\r\n        <div className=\"profile__list\">\r\n          <h1 className=\"profile__info\">{currentUser ? currentUser.name : 'Жак-Ив Кусто'}</h1>\r\n          <div>\r\n            <button className=\"profile__edit-button\" type=\"button\" aria-label=\"btn-edit\" onClick={onEditProfile}>\r\n              <img src={vector} alt=\"Кнопка редактировать\"/>\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <p className=\"profile__text\">{currentUser ? currentUser.about : 'Исследователь океана'}</p>\r\n          </div>\r\n      </div>\r\n      <button className=\"profile__add-Button\" type=\"button\" aria-label=\"btn-add\" onClick={onAddPlace}>\r\n        <img className=\"profile__add-Btn-img\" src={plus} alt=\"Кнопка плюс\"/>\r\n      </button>\r\n        </section>\r\n      <section className=\"elements\">\r\n      <ul className=\"cards\">\r\n        {cards.map(el => (<Card key={el._id} card={el} onCardClick={onCardClick} onCardLike={onCardLike} onCardDelete={onCardDelete}/>))}\r\n      </ul>\r\n      </section>\r\n      </main>\r\n    )\r\n}\r\n\r\nexport default Main\r\n\r\n","\r\n\r\nconst Footer = () => {\r\n    return (\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__text\">\r\n          &copy; 2021 Mesto Russia\r\n        </p>\r\n      </footer>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","\r\n\r\nconst ImagePopup = ({card, onClose}) => {\r\n    return (\r\n      <div id=\"pop-up-foto\" className={card ? \"pop-up pop-up_active\" : \"pop-up\"}>\r\n        <div className=\"pop-up__foto-container\">\r\n          <button id=\"pop-up-foto__btn-close\" className=\"pop-up__btn-close\" type=\"button\" aria-label=\"Close\" onClick={onClose}></button>\r\n          <figure className=\"pop-up__block-figure\">\r\n            <img className=\"pop-up__img\" src={card?.link} alt={card?.name}/>\r\n            <figcaption className=\"pop-up__text-img\">\r\n              {card?.name}\r\n            </figcaption>\r\n          </figure>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup\r\n","\r\nclass Api {\r\n  constructor({baseUrl, headers}) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  getFullInfo() {\r\n    return Promise.all([this.getInitialCards(), this.getUserData()])\r\n  }\r\n\r\n  _getResponseData(res) {\r\n    return res.ok ? res.json() : Promise.reject(`Ошибка ${res.status}`)\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`,{\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  userEdit(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  newCard(data) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  upgradeAvatar(avatar) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar\r\n      })\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  incrementLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: 'PUT',\r\n      headers: this._headers,\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n\r\n  decrementLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    })\r\n    .then(res => this._getResponseData(res))\r\n  }\r\n\r\n  changeLikeCardStatus(id, bool) {\r\n    return bool ? this.decrementLike(id) : this.incrementLike(id);\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-24',\r\n  headers: {\r\n    authorization: 'af9c4ef2-e2ab-4c32-9f5d-4c36de022449',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\n\r\nexport default api;\r\n","\r\nconst PopupWithForm = ({isOpen, onClose, name, onSubmit, textBtn, children , title}) => {\r\n    return (\r\n    <div id={name} className={isOpen ? 'pop-up pop-up_active' : 'pop-up'}>\r\n    <div className=\"pop-up__container pop-up__container_background\">\r\n      <button className=\"pop-up__btn-close\" type=\"button\" aria-label=\"Close\" onClick={onClose}></button>\r\n      <h2 className=\"pop-up__title\">\r\n        {title}\r\n      </h2>\r\n      <form id={name} className=\"pop-up__form\" action=\"#\" name={name} onSubmit={onSubmit}>\r\n        {children}\r\n        <button className=\"pop-up__btn-save\" type=\"submit\">\r\n          {textBtn}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\r\n\r\nconst EditProfilePopup = ({isOpen, onClose, onUpdateUser}) => {\r\n\r\n    const currentUser = useContext(CurrentUserContext);\r\n\r\n    const [name, setName] = useState('');\r\n\r\n    const [description, setDescription] = useState('');\r\n\r\n    const handleChangeName = (e) => {\r\n        setName(e.target.value);\r\n    }\r\n    const handleChangeDescription = (e) => {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser, isOpen]); \r\n\r\n    const handleSubmit = (e) => {\r\n        // Запрещаем браузеру переходить по адресу формы\r\n        e.preventDefault();\r\n        // Передаём значения управляемых компонентов во внешний обработчик\r\n        onUpdateUser({\r\n          name,\r\n          about: description,\r\n        });\r\n    }\r\n    \r\n\r\n    return (\r\n      <PopupWithForm title='Редактировать профиль' name='profile-popup' textBtn='Сохранить' isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n        <input id='nameInput' type=\"text\" className=\"pop-up__text\" value={name || ''} onChange={handleChangeName} name=\"content-name\" placeholder=\"Ваше имя\" minLength=\"2\" maxLength=\"40\"  required/>\r\n        <span id=\"nameInput-error\" className=\"pop-up__span-error\"></span>\r\n        <input id='jobInput' type=\"text\" className=\"pop-up__text\" value={description || ''} onChange={handleChangeDescription} name=\"content-job\" placeholder=\"О себе\" minLength=\"2\" maxLength=\"200\" required/>\r\n        <span id=\"jobInput-error\" className=\"pop-up__span-error\"></span>\r\n      </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React, {useRef} from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nconst EditAvatarPopup = ({isOpen, onClose, onUpdateAvatar}) => {\r\n\r\n    const avatar = useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        onUpdateAvatar({\r\n          avatar: avatar.current.value,\r\n        });\r\n    }\r\n\r\n    return (\r\n      <PopupWithForm title='Обновить аватар' name='pop-up-upgred-avatar' textBtn='Да' isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n        <input id=\"linkFotoAvatar\" type=\"url\" className=\"pop-up__text\" ref={avatar} name=\"contentFotoAvatar\" placeholder='Ссылка на картинку' required/>\r\n        <span id=\"linkFotoAvatar-error\" className=\"pop-up__span-error\"></span>\r\n      </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React, {useState} from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nconst AddPlacePopup = ({isOpen, onClose, onAddPlace}) => {\r\n\r\n    const [name, setName] = useState('');\r\n\r\n    const [link, setLink] = useState('');\r\n    \r\n    const handleChangeName = (e) => {\r\n        setName(e.target.value);\r\n    }\r\n    const handleChangeLink = (e) => {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        onAddPlace({\r\n            name,\r\n            link\r\n        })\r\n        setLink('');\r\n        setName('');\r\n    }\r\n    \r\n\r\n    return (\r\n      <PopupWithForm title='Новое место' name='pop-up-supplement-foto' textBtn='Создать' isOpen={isOpen} onClose={onClose} onSubmit={handleSubmit}>\r\n        <input id='NameFoto' type=\"text\" className=\"pop-up__text\" value={name || ''} onChange={handleChangeName} name=\"content-name-foto\" placeholder='Название' minLength='2' maxLength=\"30\" required/>\r\n        <span id=\"NameFoto-error\" className=\"pop-up__span-error\"></span>\r\n        <input id='linkFoto' type=\"url\" className=\"pop-up__text\" value={link || ''} onChange={handleChangeLink} name=\"content-foto\" placeholder='Ссылка на картинку' required/>\r\n        <span id=\"linkFoto-error\" className=\"pop-up__span-error\"></span>\r\n      </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React, {useState} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst Register = ({registration}) => {\r\n\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n\r\n    const handleChangeEmail = (e) => {\r\n      setEmail(e.target.value);\r\n    }\r\n    const handleChangePassword = (e) => {\r\n      setPassword(e.target.value);\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n      \r\n      registration(email, password);\r\n    }\r\n\r\n    // handleChange = handleChange.bind(this);\r\n    // handleSubmit = handleSubmit.bind(this);\r\n\r\n\r\n    return (\r\n        <section className=\"authorization\">\r\n        <h2 className=\"authorization__title\">\r\n          Регистрация\r\n        </h2>\r\n        <form className=\"authorization__form\" action=\"#\" name=\"registerName\" noValidate onSubmit={handleSubmit}>\r\n          <input id='email-Input-Register' type=\"text\" className=\"authorization__dataInput\" value={email} onChange={handleChangeEmail} name=\"email-Register\" placeholder=\"Ваш Email\" minLength=\"2\" maxLength=\"40\"  required/>\r\n          <input id='password-Input-Register' type=\"password\" className=\"authorization__dataInput\" value={password} onChange={handleChangePassword} name=\"password-Register\" placeholder=\"Пароль\" minLength=\"2\" maxLength=\"200\" required/>\r\n          <button className=\"authorization__btn\" type=\"submit\">\r\n            Зарегистрироваться\r\n          </button>\r\n          <Link className='authorization__link' to='/sign-in'>Уже зарегистрированы? Войти</Link>\r\n        </form>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Register\r\n","import React, {useState} from 'react'\r\n\r\nconst Login = ({authorization}) => {\r\n    const [email, setEmail] = useState('');\r\n\r\n    const [password, setPassword] = useState('');\r\n\r\n    const handleChangeEmail = (e) => {\r\n      setEmail(e.target.value);\r\n    }\r\n\r\n    const handleChangePassword = (e) => {\r\n      setPassword(e.target.value);\r\n    }\r\n\r\n    \r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n\r\n    authorization(email,password);\r\n  }\r\n\r\n    return (\r\n        <section className=\"authorization\">\r\n        <h2 className=\"authorization__title\">\r\n          Вход\r\n        </h2>\r\n        <form className=\"authorization__form\" action=\"#\" name=\"registerName\" onSubmit={handleSubmit} noValidate >\r\n          <input id='email-Input-Login' type=\"text\" className=\"authorization__dataInput\" value={email} onChange={handleChangeEmail} name=\"email-Login\" placeholder=\"Ваш Email\" minLength=\"2\" maxLength=\"40\"  required/>\r\n          <input id='password-Input-Login' type=\"password\" className=\"authorization__dataInput\" value={password} onChange={handleChangePassword} name=\"password-Login\" placeholder=\"Пароль\" minLength=\"2\" maxLength=\"200\" required/>\r\n          <button className=\"authorization__btn\" type=\"submit\">\r\n            Войти\r\n          </button>\r\n        </form>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\n\r\nconst InfoTooltip = ({isOpen, onClose, message}) => {\r\n    return (\r\n        <div className={isOpen ? 'pop-up pop-up_active' : 'pop-up'}>\r\n        <div className=\"pop-up__container pop-up__container_background pop-up__container_authorization\">\r\n          <button className=\"pop-up__btn-close\" type=\"button\" aria-label=\"Close\" onClick={onClose}></button>\r\n          <img className=\"pop-up__icon\" src={message.iconPath} alt=\"Значок результата регистрации\"></img>\r\n          <p className=\"pop-up__icon-text\">{message.text}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default InfoTooltip\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\n// этот компонент принимает другой компонент в качестве пропса\r\n// он также может взять неограниченное число пропсов и передать их новому компоненту\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute; ","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nconst checkRequestResult = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Error ${res.status}`);\r\n}\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({password, email})\r\n  })\r\n  .then(checkRequestResult);\r\n}; \r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then(checkRequestResult)\r\n  // .then((res) => {\r\n  //   if (res.status === 400) {\r\n  //     throw new Error('Не все поля заполнены');\r\n  //   } else if (res.status === 401) {\r\n  //     throw new Error('Email не зарегистрирован');\r\n  //   } else { \r\n  //     console.log(res);\r\n  //     return res.json()}\r\n  // })\r\n  .then((data) => {\r\n    if (data.token) {\r\n      localStorage.setItem('jwt', data.token);\r\n      return data.token;\r\n    }\r\n  })\r\n}\r\n\r\nexport const getContent = (token) => {return fetch(`${BASE_URL}/users/me`, {\r\n  method: 'GET',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Authorization': `Bearer ${token}`,\r\n  },\r\n})\r\n  .then(checkRequestResult)\r\n  .then((data) => data)\r\n}","export default __webpack_public_path__ + \"static/media/UnionTrue.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/UnionFalse.df8eddf6.svg\";","import React, {useState, useEffect} from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport ImagePopup from './ImagePopup.js';\nimport api from '../utils/api.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js'\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport * as Auth from '../utils/Auth.js';\nimport regIsFine from '../images/UnionTrue.svg';\nimport regIsFailed from '../images/UnionFalse.svg';\n\n\n\nfunction App() {\n\n  const [currentUser, setCurrentUser] = useState({});\n\n  const [cards, setCards] = useState([]);\n\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  const history = useHistory();\n\n\n  useEffect(() => {\n    api.getFullInfo()\n    .then(([arrCards, userData]) => {\n      setCurrentUser(userData);\n      setCards(arrCards);\n    })\n    .catch(err => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    // токен\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      Auth.getContent(jwt)\n        .then((res) => {\n          setLoggedIn(true);\n          setEmail(res.data.email);\n          history.push('/');\n        })\n        .catch(err => console.log(err));\n    }\n  }, [history]);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    }).catch(err => console.log(err));\n    \n  } \n\n  const handleCardDelete = (card) => {\n\n    api.deleteCard(card._id)\n    .then(res => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    })\n    .catch(err => console.log(err));\n  }\n\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n\n  const [infoTooltipOpen, setInfoTooltipOpen] = useState(false);\n\n  const [message, setMessage] = useState({});\n  const escapeHtml = require('escape-html');\n  const [email, setEmail] = useState('');\n\n\n  const [selectedCard, setSelectedCard] = useState(null);\n\n\n  // изменение сотояния при клике (открывает попап)\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  }\n  \n\n  // изменение сотояния при клике (открывает попап)\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  // изменение сотояния при клике (открывает попап)\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  // // изменение сотояния при клике (закрывает попапы)\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setInfoTooltipOpen(false)\n\n    setSelectedCard(null);\n  }\n  \n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n  \n  const handleUpdateUser = (data) => {\n    api.userEdit(data)\n    .then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n\n  const handleUpdateAvatar = (data) => {\n    api.upgradeAvatar(data.avatar)\n    .then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n  \n  const handleAddPlaceSubmit = (newCard) => {\n    api.newCard(newCard)\n    .then(res => {\n      setCards([res, ...cards]); \n      closeAllPopups();\n    })\n    .catch(err => console.log(err))\n  }\n\n  function handleInfoTooltipContent({iconPath, text}) {\n    setMessage({ iconPath, text })\n  }\n\n  const handlerInfoTooltipOpen = () => {\n    setInfoTooltipOpen(true)\n  }\n  \n\n  function registration(email, password) {\n    Auth.register(escapeHtml(email), password).then((res) => {\n      if(res.status === 201){\n        handleInfoTooltipContent({iconPath: regIsFine, text: 'Вы успешно зарегистрировались!'})\n        handlerInfoTooltipOpen();\n        /// редирект на стр входа для повтоного ввода\n        history.push(\"/sign-in\");\n        // свайпнули модалку через 1 сек\n        setTimeout(closeAllPopups, 1000);\n      }\n    }).catch((err)=> {\n      handleInfoTooltipContent({iconPath: regIsFailed, text: 'Что-то пошло не так! Попробуйте ещё раз.'})\n      handlerInfoTooltipOpen();\n      setTimeout(closeAllPopups, 2500);\n      console.log(err)\n    })\n  }\n\n   // Авторизация \n   function authorization(email, password) {\n    Auth.authorize(escapeHtml(email), password )\n    .then((data) => {\n      if (!data) {\n        throw new Error('Произошла ошибка');\n      }\n      Auth.getContent(data)\n        .then((res) => {\n          setEmail(res.data.email);\n          setLoggedIn(true);\n        })\n        .then(()=> {\n          handleInfoTooltipContent({iconPath: regIsFine, text: 'Вы успешно авторизовались!'})\n          handlerInfoTooltipOpen();\n          // редирект на главную\n          history.push(\"/\");\n          //свайпнули модалку после редиректа через 1сек\n          setTimeout(closeAllPopups, 1000);\n        })\n        \n    }).catch((err) => {\n      handleInfoTooltipContent({iconPath: regIsFailed, text: 'Что то пошло не так!'})\n      handlerInfoTooltipOpen();\n      console.log(err)\n    })\n  }\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem('jwt');\n    setEmail('');\n    history.push('/sign-in');\n  }\n  \n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n     <Header email={email} handleSignOut={handleSignOut} loggedIn={loggedIn}/>\n     <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n     <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n     <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n     <ImagePopup card={selectedCard} onClose={closeAllPopups}></ImagePopup>\n     <InfoTooltip isOpen={infoTooltipOpen} onClose={closeAllPopups} message={message}/>\n     <Switch>\n       <ProtectedRoute \n         exact\n         path='/' \n         loggedIn={loggedIn} \n         component={Main}\n         cards={cards} \n         onCardLike={handleCardLike} \n         onCardDelete={handleCardDelete} \n         onEditAvatar={handleEditAvatarClick} \n         onEditProfile={handleEditProfileClick} \n         onAddPlace={handleAddPlaceClick} \n         onCardClick={handleCardClick}\n       />\n       <Route path='/sign-up'>\n         <Register registration={registration}/>\n       </Route>\n       <Route path='/sign-in'>\n         <Login authorization={authorization}/>\n       </Route>\n       <Route exact path=\"/\">\n         {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n       </Route>\n     </Switch>\n     <Footer/>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}